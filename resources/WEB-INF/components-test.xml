<?xml version="1.0" encoding="UTF-8"?>
<components xmlns="http://jboss.com/products/seam/components"
            xmlns:core="http://jboss.com/products/seam/core"
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xmlns:persistence="http://jboss.com/products/seam/persistence"
            xmlns:web="http://jboss.com/products/seam/web"
            xsi:schemaLocation=
                    "http://jboss.com/products/seam/core
               http://jboss.com/products/seam/core-2.1.xsd
               http://jboss.com/products/seam/components
               http://jboss.com/products/seam/components-2.1.xsd">

    <core:init debug="false"/>

    <core:manager conversation-timeout="120000"/>

    <persistence:entity-manager-factory name="extrastorefactory" persistence-unit-name="extrastore_pu"/>

    <!-- Strangely, <s:convertEntity /> fails with hard-to-trace NullPointerException, because "entityManger"
    injected variable name is hard-coded into seam persistence lib. So, we'd better use 'entityManager', not 'em' -->

    <persistence:managed-persistence-context name="entityManager" auto-create="true"
                                             entity-manager-factory="#{extrastorefactory}"/>

    <web:rewrite-filter view-mapping="*.seam"/>

</components>
