<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:s="http://jboss.com/products/seam/taglib"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:a4j="http://richfaces.org/a4j"
    template="/layout/template.xhtml">
    
<ui:define name="title"> Партии</ui:define>
<ui:define name="body">


    <a4j:loadStyle src="/stylesheet/admin.css" />

    <a4j:form id="batchesForm">

    <rich:extendedDataTable id="batchesList"
            var="batch"
            value="#{batchesList.dataModel}"
            rendered="#{not empty batchesList.resultList}"
            selectionMode="multi"
            selection="#{batchesList.selection}"
            rows="18"
            height="524px"
            >
        <f:facet name="header">
             <h:outputText value="Партии" />
        </f:facet>

        <rich:column width="45px" sortable="true" sortBy="#{batch.id}" label="Номер">
            <f:facet name="header">
                <h:outputText value="Номер" />
            </f:facet>
            <h:outputText value="#{batch.id}" style="font-weight: bold;"/>
        </rich:column>

        <rich:column sortable="true" sortBy="#{batch.shipmentDate}" sortOrder="DESCENDING"
                label="Дата" width="100px">
            <f:facet name="header">
                <h:outputText value="Дата" />
            </f:facet>
            <h:outputText value="#{batch.shipmentDate}" />
        </rich:column>

        <rich:column filterBy="#{batch.ops}" filterEvent="onkeyup"  label="ОПС" width="80px">
            <f:facet name="header">
                <h:outputText value="ОПС" />
            </f:facet>
            <h:outputText value="#{batch.ops}" />

        </rich:column>

        <rich:column sortable="true" sortBy="#{batch.orders.size}" label="Заказов" width="80px">
            <f:facet name="header">
                <h:outputText value="Заказов" />
            </f:facet>
            <h:outputText value="#{batch.orders.size}" />

        </rich:column>


        <f:facet name="footer">
             <rich:datascroller renderIfSinglePage="false" maxPages="7" ajaxSingle="true" for="batchesList" />
        </f:facet>
    </rich:extendedDataTable>


    <s:div styleClass="actionButtons" rendered="#{empty from}">
        <s:button view="/admin/batchEdit.xhtml"
                    id="create"
           propagation="none"
                 value="Новая партия">
            <f:param name="batchId"/>
        </s:button>
        <a4j:commandButton actionListener="#{batchesList.removeSelection}" value="Удалить" reRender="batchesForm" />
    </s:div>

    </a4j:form>

</ui:define>

</ui:composition>
